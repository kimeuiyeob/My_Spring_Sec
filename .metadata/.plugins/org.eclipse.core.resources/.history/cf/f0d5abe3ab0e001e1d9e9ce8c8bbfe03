package com.cos.blog.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;

@Configuration // 빈 등록 (IOC)
@EnableWebSecurity // 시큐리티 필터 추가 => 스프링 시큐리티 해당 설정을 파일에서 하겠다.
public class SecurityConfig {

	@Bean
	public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
		// "/auth/**" 이런주소로 들어오면 permitAll() 요청을 전부 허용하고 .anyRequest() 아닌 다른 주소들은
		// .authenticated() 인증이 필요하다.
		http.authorizeHttpRequests().antMatchers("/auth/**").permitAll().anyRequest().authenticated().and().formLogin()
				.loginPage("/auth/loginForm");
		return http.build();

	}
}
